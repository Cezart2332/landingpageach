document.addEventListener("DOMContentLoaded",()=>{document.body.classList.add("loading");const e=["localhost","127.0.0.1"].includes(window.location.hostname)?"/api":"https://api.acoomh.ro";let t=[],n=[],a=[],o="all",i="",s="all",c=null,l=[];const r={statsRow:document.getElementById("statsRow"),filterTabs:document.getElementById("filterTabs"),searchInput:document.getElementById("searchInput"),locationFilter:document.getElementById("locationFilter"),eventsGrid:document.getElementById("eventsGrid"),loadingState:document.getElementById("loadingState"),errorState:document.getElementById("errorState"),emptyState:document.getElementById("emptyState"),eventModal:document.getElementById("eventModal"),eventForm:document.getElementById("eventForm"),modalTitle:document.getElementById("modalTitle"),deleteModal:document.getElementById("deleteModal"),deleteEventName:document.getElementById("deleteEventName"),eventName:document.getElementById("eventName"),ownLocationRadio:document.getElementById("ownLocation"),otherLocationRadio:document.getElementById("otherLocation"),ownLocationSelector:document.getElementById("ownLocationSelector"),otherLocationInput:document.getElementById("otherLocationInput"),customLocationName:document.getElementById("customLocationName"),customLocationAddress:document.getElementById("customLocationAddress"),eventCategory:document.getElementById("eventCategory"),eventDescription:document.getElementById("eventDescription"),eventDate:document.getElementById("eventDate"),eventTime:document.getElementById("eventTime"),eventDuration:document.getElementById("eventDuration"),eventCapacity:document.getElementById("eventCapacity"),hasPaidTickets:document.getElementById("hasPaidTickets"),ticketPrice:document.getElementById("ticketPrice"),earlyBirdPrice:document.getElementById("earlyBirdPrice"),earlyBirdDeadline:document.getElementById("earlyBirdDeadline"),eventTags:document.getElementById("eventTags"),eventImage:document.getElementById("eventImage"),specialInstructions:document.getElementById("specialInstructions"),isPromoted:document.getElementById("isPromoted"),tagsPreview:document.getElementById("tagsPreview"),imageUploadArea:document.getElementById("imageUploadArea"),imagePreview:document.getElementById("imagePreview"),previewImg:document.getElementById("previewImg"),removeImage:document.getElementById("removeImage"),ticketPricing:document.getElementById("ticketPricing")};async function loadBusinessEvents(){r.loadingState.style.display="flex",r.errorState.style.display="none",r.emptyState.style.display="none",r.eventsGrid.style.display="none";try{const a=await fetch(`${e}/events`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const o=await a.json(),i=o.data||o||[];if(!Array.isArray(i))throw new Error("API response is not a valid events array");t=i,n=i,displayEvents(),hideLoadingState(),console.log("‚úÖ Successfully loaded business events:",i.length)}catch(e){console.error("Error loading business events:",e),t=function(){const e=a.length>0?a:[{id:1,name:"Central Bistro"},{id:2,name:"Urban Roast"},{id:3,name:"Garden Lounge"}];return[{id:1,name:"Jazz Night Live",description:"O searƒÉ de jazz autentic cu muzicieni locali »ôi interna»õional. AtmosferƒÉ intimƒÉ »ôi cocktailuri speciale.",category:"concert",locationId:e[0]?.id||1,locationName:e[0]?.name||"Central Bistro",eventDate:"2025-09-15",eventTime:"20:00",duration:"3",capacity:"80",isPaid:!0,ticketPrice:35,earlyBirdPrice:25,earlyBirdDeadline:"2025-09-10",tags:["jazz","live music","cocktails","weekend"],specialInstructions:"Cod vestimentar smart casual recomandat",isPromoted:!0,status:"upcoming",ticketsSold:23,imageUrl:"https://picsum.photos/seed/jazz1/400/300"},{id:2,name:"Degustare de Vinuri",description:"Descoperi»õi cele mai fine vinuri rom√¢ne»ôti √Æntr-o degustare ghidatƒÉ de exper»õi sommelieri.",category:"degustare",locationId:e[1]?.id||2,locationName:e[1]?.name||"Urban Roast",eventDate:"2025-09-20",eventTime:"19:00",duration:"2",capacity:"30",isPaid:!0,ticketPrice:50,tags:["vin","degustare","sommelier"],isPromoted:!0,status:"upcoming",ticketsSold:15,imageUrl:"https://picsum.photos/seed/wine1/400/300"},{id:3,name:"Karaoke Night",description:"SƒÉptƒÉm√¢nal √Æn fiecare vineri! C√¢ntƒÉ hiturile tale preferate √Æntr-o atmosferƒÉ relaxatƒÉ.",category:"karaoke",locationId:e[2]?.id||3,locationName:e[2]?.name||"Garden Lounge",eventDate:"2025-09-06",eventTime:"21:00",duration:"4",capacity:"60",isPaid:!1,tags:["karaoke","weekend","fun"],isPromoted:!1,status:"past",ticketsSold:0,imageUrl:"https://picsum.photos/seed/karaoke1/400/300"}]}(),n=t,displayEvents(),hideLoadingState(),console.log("üîÑ Using mock data for demonstration")}}function hideLoadingState(){r.loadingState.style.display="none"}function displayEvents(){const e=getFilteredEvents();if(0===e.length)return r.loadingState.style.display="none",r.errorState.style.display="none",r.emptyState.style.display="flex",void(r.eventsGrid.style.display="none");r.loadingState.style.display="none",r.errorState.style.display="none",r.emptyState.style.display="none",r.eventsGrid.style.display="grid",r.eventsGrid.innerHTML="",e.forEach(e=>{const t=function(e){const t=document.createElement("div");t.className="event-card",t.setAttribute("data-event-id",e.id);const n=(s=e.status,{upcoming:"status-upcoming",active:"status-active",past:"status-past",draft:"status-draft"}[s]||"status-upcoming"),a=function(e){return{upcoming:"Viitor",active:"Activ",past:"Trecut",draft:"Draft"}[e]||"Viitor"}(e.status),o=function(e,t){try{const n=new Date(e+"T"+t),a={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return n.toLocaleDateString("ro-RO",a)}catch(n){return`${e} la ${t}`}}(e.eventDate,e.eventTime),i=e.tags||[];var s;return t.innerHTML=`\n      <div class="event-image">\n        <img src="${e.imageUrl||function(e){return`https://picsum.photos/seed/${e||"event"}/400/300`}(e.category)}" alt="${e.name}" loading="lazy" />\n        <div class="event-status-badge ${n}">${a}</div>\n      </div>\n      <div class="event-content">\n        <div class="event-header">\n          <h3 class="event-name">${e.name}</h3>\n          <div class="event-location">\n            <i class="fas fa-location-dot"></i>\n            <span>${e.locationName||"Loca»õie necunoscutƒÉ"}</span>\n          </div>\n          <div class="event-date">\n            <i class="fas fa-calendar"></i>\n            <span>${o}</span>\n          </div>\n        </div>\n        \n        ${i.length>0?`\n          <div class="event-tags">\n            ${i.slice(0,3).map(e=>`<span class="event-tag">${e}</span>`).join("")}\n            ${i.length>3?`<span class="event-tag">+${i.length-3}</span>`:""}\n          </div>\n        `:""}\n        \n        <div class="event-stats">\n          <div class="event-stat">\n            <i class="fas fa-users"></i>\n            <span>${e.capacity||"N/A"} max</span>\n          </div>\n          <div class="event-stat">\n            <i class="fas fa-ticket-alt"></i>\n            <span>${e.ticketsSold||0} v√¢ndute</span>\n          </div>\n          <div class="event-stat">\n            <i class="fas fa-euro-sign"></i>\n            <span>${e.isPaid?e.ticketPrice+" RON":"Gratuit"}</span>\n          </div>\n        </div>\n        \n        <div class="event-actions">\n          <button class="btn-view" onclick="viewEventDetails('${e.id}')">\n            <i class="fas fa-eye"></i> Vezi\n          </button>\n          <button class="btn-icon edit" onclick="editEvent('${e.id}')" title="EditeazƒÉ">\n            <i class="fas fa-pen"></i>\n          </button>\n          <button class="btn-icon delete" onclick="confirmDeleteEvent('${e.id}')" title="»òterge">\n            <i class="fas fa-trash"></i>\n          </button>\n        </div>\n      </div>\n    `,t}(e);r.eventsGrid.appendChild(t)})}function getFilteredEvents(){let e=[...t];if("all"!==o&&(e=e.filter(e=>e.status===o)),"all"!==s&&(e=e.filter(e=>e.locationId.toString()===s)),i){const t=i.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||e.category.toLowerCase().includes(t)||e.tags&&e.tags.some(e=>e.toLowerCase().includes(t)))}return e}function updateStatistics(){const e={total:t.length,active:t.filter(e=>"active"===e.status).length,upcoming:t.filter(e=>"upcoming"===e.status).length,ticketsSold:t.reduce((e,t)=>e+(t.ticketsSold||0),0)};document.getElementById("totalEvents").textContent=e.total,document.getElementById("activeEvents").textContent=e.active,document.getElementById("upcomingEvents").textContent=e.upcoming,document.getElementById("ticketsSold").textContent=e.ticketsSold}function populateLocationFilter(){const e=r.locationFilter;e.innerHTML='<option value="all">Toate loca»õiile</option>',a.forEach(t=>{const n=document.createElement("option");n.value=t.id,n.textContent=t.name||t.Name||`Loca»õia ${t.id}`,e.appendChild(n)})}function openEventModal(e=null){c=e,e?(r.modalTitle.textContent="EditeazƒÉ Eveniment",function(e){if(r.eventName.value=e.name||"",r.eventCategory.value=e.category||"",r.eventDescription.value=e.description||"",r.eventDate.value=e.eventDate||"",r.eventTime.value=e.eventTime||"",r.eventDuration.value=e.duration||"",r.eventCapacity.value=e.capacity||"",r.hasPaidTickets.checked=e.isPaid||!1,r.ticketPrice.value=e.ticketPrice||"",r.earlyBirdPrice.value=e.earlyBirdPrice||"",r.earlyBirdDeadline.value=e.earlyBirdDeadline||"",r.specialInstructions.value=e.specialInstructions||"",r.isPromoted.checked=e.isPromoted||!1,e.locationId&&a.find(t=>t.id===e.locationId)){r.ownLocationRadio.checked=!0,r.otherLocationRadio.checked=!1;const t=a.find(t=>t.id===e.locationId);t&&function(e){const t=r.ownLocationSelector;t.innerHTML="";const n=document.createElement("div");n.className="selected-location-display",n.dataset.locationId=e.id,n.innerHTML=`\n      <div class="location-info">\n        <i class="fas fa-location-dot"></i>\n        <span>${e.name}</span>\n      </div>\n      <div class="location-note">Evenimentul va fi organizat la aceastƒÉ loca»õie</div>\n    `,t.appendChild(n)}(t),r.ownLocationSelector.style.display="block",r.otherLocationInput.style.display="none"}else r.ownLocationRadio.checked=!1,r.otherLocationRadio.checked=!0,r.customLocationName.value=e.customLocationName||e.locationName||"",r.customLocationAddress.value=e.customLocationAddress||"",r.ownLocationSelector.style.display="none",r.otherLocationInput.style.display="block";l=e.tags||[],updateTagsPreview(),e.imageUrl&&showImagePreview(e.imageUrl);toggleTicketPricing()}(e)):(r.modalTitle.textContent="AdaugƒÉ Eveniment",resetEventForm()),r.eventModal.style.display="flex",document.body.style.overflow="hidden"}function closeEventModal(){r.eventModal.style.display="none",document.body.style.overflow="auto",resetEventForm(),c=null}function resetEventForm(){r.eventForm.reset(),l=[],updateTagsPreview(),hideImagePreview(),r.ticketPricing.style.display="none",clearFormErrors();const e=(new Date).toISOString().split("T")[0];r.eventDate.min=e}function showFieldError(e,t){const n=document.getElementById(e);n&&(n.textContent=t,n.style.display="block")}function clearFormErrors(){document.querySelectorAll(".field-error").forEach(e=>{e.style.display="none",e.textContent=""})}function applyFilters(){n=getFilteredEvents(),displayEvents()}function toggleTicketPricing(){const e=r.hasPaidTickets.checked;r.ticketPricing.style.display=e?"block":"none",e||(r.ticketPrice.value="",r.earlyBirdPrice.value="",r.earlyBirdDeadline.value="")}function handleLocationTypeChange(){r.ownLocationRadio.checked?(r.ownLocationSelector.style.display="block",r.otherLocationInput.style.display="none",r.customLocationName.value="",r.customLocationAddress.value="",r.customLocationName.required=!1,r.customLocationAddress.required=!1):(r.ownLocationSelector.style.display="none",r.otherLocationInput.style.display="block",r.customLocationName.required=!0,r.customLocationAddress.required=!0),document.getElementById("eventLocationError").style.display="none",document.getElementById("customLocationError").style.display="none"}function handleTagsInput(e){const t=e.target.value;if(t.includes(",")){t.split(",").map(e=>e.trim()).filter(Boolean).forEach(e=>{e&&!l.includes(e)&&l.length<10&&l.push(e)}),e.target.value="",updateTagsPreview()}}function handleTagsKeydown(e){if("Enter"===e.key){e.preventDefault();const t=e.target.value.trim();t&&!l.includes(t)&&l.length<10&&(l.push(t),e.target.value="",updateTagsPreview())}"Backspace"===e.key&&!e.target.value&&l.length>0&&(l.pop(),updateTagsPreview())}function updateTagsPreview(){r.tagsPreview.innerHTML=l.map(e=>`\n      <span class="tag-chip">\n        ${e}\n        <button type="button" onclick="removeTag('${e}')">√ó</button>\n      </span>\n    `).join("")}function handleImageUpload(e){const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{showImagePreview(e.target.result)},e.readAsDataURL(t)}}function showImagePreview(e){r.previewImg.src=e,r.imageUploadArea.style.display="none",r.imagePreview.style.display="block"}function hideImagePreview(){r.imageUploadArea.style.display="block",r.imagePreview.style.display="none",r.eventImage.value=""}async function handleEventFormSubmit(n){if(n.preventDefault(),console.log("Form submission started..."),!function(){clearFormErrors();const e=[];console.log("üîç Starting form validation..."),r.eventName.value.trim()?console.log("‚úÖ Event name is valid:",r.eventName.value.trim()):(console.log("‚ùå Event name is missing"),showFieldError("eventNameError","Numele evenimentului este obligatoriu"),e.push("name"));const t=r.ownLocationRadio.checked;if(console.log("üìç Location type - Own location:",t),t){let t=!1;const n=r.ownLocationSelector.querySelector(".selected-location-display");n&&n.dataset.locationId&&(t=!0,console.log("‚úÖ Found location display with ID:",n.dataset.locationId)),!t&&c&&c.locationId&&a.find(e=>e.id===c.locationId)&&(t=!0,console.log("‚úÖ Using original event location:",c.locationId)),t||1!==a.length||(t=!0,console.log("‚úÖ Using single user location:",a[0].id)),t||(console.log("‚ùå No valid location found for own location option"),console.log("User locations:",a),console.log("Editing event:",c),showFieldError("eventLocationError","SelecteazƒÉ o loca»õie sau adaugƒÉ o loca»õie √Æn sec»õiunea Loca»õii"),e.push("location"))}else r.customLocationName.value.trim()?console.log("‚úÖ Custom location name is valid:",r.customLocationName.value.trim()):(console.log("‚ùå Custom location name is missing"),showFieldError("customLocationError","Numele loca»õiei este obligatoriu"),e.push("customLocationName")),r.customLocationAddress.value.trim()?console.log("‚úÖ Custom location address is valid:",r.customLocationAddress.value.trim()):(console.log("‚ùå Custom location address is missing"),showFieldError("customLocationError","Adresa loca»õiei este obligatorie"),e.push("customLocationAddress"));if(r.eventCategory.value?console.log("‚úÖ Event category is valid:",r.eventCategory.value):(console.log("‚ùå Event category is missing"),showFieldError("eventCategoryError","SelecteazƒÉ o categorie"),e.push("category")),r.eventDescription.value.trim()?console.log("‚úÖ Event description is valid"):(console.log("‚ùå Event description is missing"),showFieldError("eventDescriptionError","Descrierea este obligatorie"),e.push("description")),r.eventDate.value?console.log("‚úÖ Event date is valid:",r.eventDate.value):(console.log("‚ùå Event date is missing"),showFieldError("eventDateError","Data evenimentului este obligatorie"),e.push("date")),r.eventTime.value?console.log("‚úÖ Event time is valid:",r.eventTime.value):(console.log("‚ùå Event time is missing"),showFieldError("eventTimeError","Ora de √Ænceput este obligatorie"),e.push("time")),r.hasPaidTickets.checked&&(!r.ticketPrice.value||parseFloat(r.ticketPrice.value)<=0?(console.log("‚ùå Ticket price is invalid for paid event"),showFieldError("ticketPriceError","Pre»õul biletului este obligatoriu pentru evenimente cu platƒÉ"),e.push("ticketPrice")):console.log("‚úÖ Ticket price is valid:",r.ticketPrice.value)),r.eventDate.value){const t=new Date(r.eventDate.value),n=new Date;n.setHours(0,0,0,0),t<n&&(console.log("‚ùå Event date is in the past"),showFieldError("eventDateError","Data evenimentului nu poate fi √Æn trecut"),e.push("pastDate"))}const n=0===e.length;return console.log("üéØ Validation result:",n?"PASSED":"FAILED"),n||console.log("‚ùå Validation errors:",e),n}())return void console.log("Form validation failed");const o=document.getElementById("saveEventBtn"),i=o.innerHTML;try{o.disabled=!0,o.innerHTML='<i class="fas fa-spinner fa-spin"></i> Salvare...';const n=r.ownLocationRadio.checked,i={name:r.eventName.value.trim(),description:r.eventDescription.value.trim(),category:r.eventCategory.value,eventDate:r.eventDate.value,eventTime:r.eventTime.value,duration:r.eventDuration.value||"2",capacity:r.eventCapacity.value||"50",isPaid:r.hasPaidTickets.checked,ticketPrice:r.hasPaidTickets.checked?parseFloat(r.ticketPrice.value):0,earlyBirdPrice:r.earlyBirdPrice.value?parseFloat(r.earlyBirdPrice.value):null,earlyBirdDeadline:r.earlyBirdDeadline.value||null,tags:l,specialInstructions:r.specialInstructions.value.trim(),isPromoted:r.isPromoted.checked,imageFile:r.eventImage.files[0]||null};if(n){let e=null,t="";const n=r.ownLocationSelector.querySelector(".selected-location-display");if(n&&n.dataset.locationId&&(e=parseInt(n.dataset.locationId),t=n.querySelector(".location-info span")?.textContent||""),!e&&c&&c.locationId){e=c.locationId;const n=a.find(e=>e.id===c.locationId);n&&(t=n.name||n.Name||"")}if(e||1!==a.length||(e=a[0].id,t=a[0].name||a[0].Name||""),!e)throw new Error("Te rugƒÉm sƒÉ selectezi o loca»õie sau sƒÉ adaugi o loca»õie √Æn sec»õiunea Loca»õii");i.locationId=e,i.locationName=t,i.isCustomLocation=!1,console.log("Using own location:",e,t)}else i.customLocationName=r.customLocationName.value.trim(),i.customLocationAddress=r.customLocationAddress.value.trim(),i.locationName=i.customLocationName,i.locationId=null,i.isCustomLocation=!0,console.log("Using custom location:",i.customLocationName);let s;if(i.status=function(e,t){const n=new Date,a=new Date(e+"T"+t);return a>n?"upcoming":a.toDateString()===n.toDateString()?"active":"past"}(i.eventDate,i.eventTime),console.log("Event data prepared:",i),c){console.log("Updating existing event:",c.id),s=await async function(t,n){try{const a=new FormData;a.append("name",n.name),a.append("description",n.description),a.append("category",n.category),a.append("locationId",n.locationId.toString()),a.append("eventDate",n.eventDate),a.append("eventTime",n.eventTime),a.append("duration",n.duration||"2"),a.append("capacity",n.capacity||"50"),a.append("isPaid",n.isPaid?"true":"false"),n.isPaid&&(a.append("ticketPrice",n.ticketPrice.toString()),n.earlyBirdPrice&&a.append("earlyBirdPrice",n.earlyBirdPrice.toString()),n.earlyBirdDeadline&&a.append("earlyBirdDeadline",n.earlyBirdDeadline)),n.tags&&n.tags.length>0&&a.append("tags",JSON.stringify(n.tags)),n.specialInstructions&&a.append("specialInstructions",n.specialInstructions),a.append("isPromoted",n.isPromoted?"true":"false"),n.imageFile&&a.append("eventImage",n.imageFile);const o=await fetch(`${e}/events/${t}`,{method:"PUT",body:a});if(!o.ok){const e=await o.text();throw new Error(e||"Failed to update event")}const i=await o.json();return console.log("‚úÖ Successfully updated event:",i),i}catch(e){throw console.error("Error updating event:",e),e}}(c.id,i);const n=t.findIndex(e=>e.id===c.id);-1!==n&&(t[n]={...t[n],...i,...s}),showNotification("Eveniment actualizat cu succes!","success")}else{console.log("Creating new event"),s=await async function(t){try{const n=new FormData;n.append("name",t.name),n.append("description",t.description),n.append("category",t.category),n.append("locationId",t.locationId.toString()),n.append("eventDate",t.eventDate),n.append("eventTime",t.eventTime),n.append("duration",t.duration||"2"),n.append("capacity",t.capacity||"50"),n.append("isPaid",t.isPaid?"true":"false"),t.isPaid&&(n.append("ticketPrice",t.ticketPrice.toString()),t.earlyBirdPrice&&n.append("earlyBirdPrice",t.earlyBirdPrice.toString()),t.earlyBirdDeadline&&n.append("earlyBirdDeadline",t.earlyBirdDeadline)),t.tags&&t.tags.length>0&&n.append("tags",JSON.stringify(t.tags)),t.specialInstructions&&n.append("specialInstructions",t.specialInstructions),n.append("isPromoted",t.isPromoted?"true":"false"),t.imageFile&&n.append("eventImage",t.imageFile);const a=await fetch(`${e}/events`,{method:"POST",body:n});if(!a.ok){const e=await a.text();throw new Error(e||"Failed to create event")}const o=await a.json();return console.log("‚úÖ Successfully created event:",o),o}catch(e){throw console.error("Error creating event:",e),e}}(i);const n={...i,...s,id:s.id||Date.now(),ticketsSold:0,locationName:i.locationName};t.unshift(n),showNotification("Eveniment creat cu succes!","success")}closeEventModal(),updateStatistics(),applyFilters()}catch(e){console.error("Error saving event:",e),showNotification("Eroare la salvarea evenimentului: "+e.message,"error")}finally{o.disabled=!1,o.innerHTML=i}}function closeDeleteModal(){r.deleteModal.style.display="none",document.body.style.overflow="auto",delete r.deleteModal.dataset.eventId}async function handleDeleteEvent(){const n=r.deleteModal.dataset.eventId;if(!n)return;const a=document.getElementById("confirmDeleteBtn"),o=a.innerHTML;try{a.disabled=!0,a.innerHTML='<i class="fas fa-spinner fa-spin"></i> »òtergere...',await async function(t){try{const n=await fetch(`${e}/events/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return console.log("‚úÖ Successfully deleted event:",t),!0}catch(e){throw console.error("Error deleting event:",e),e}}(n),t=t.filter(e=>e.id.toString()!==n.toString()),closeDeleteModal(),updateStatistics(),applyFilters(),showNotification("Eveniment »ôters cu succes!","success")}catch(e){console.error("Error deleting event:",e),showNotification("Eroare la »ôtergerea evenimentului: "+e.message,"error")}finally{a.disabled=!1,a.innerHTML=o}}function showNotification(e,t="info"){const n=document.createElement("div");if(n.className=`notification ${t}`,n.innerHTML=`\n      <div class="notification-content">\n        <i class="fas ${"success"===t?"fa-check-circle":"error"===t?"fa-exclamation-circle":"fa-info-circle"}"></i>\n        <span>${e}</span>\n      </div>\n    `,!document.querySelector(".notification-styles")){const e=document.createElement("style");e.className="notification-styles",e.textContent="\n        .notification {\n          position: fixed;\n          top: 80px;\n          right: 20px;\n          z-index: 10000;\n          padding: 16px 20px;\n          border-radius: 12px;\n          color: #fff;\n          font-weight: 600;\n          box-shadow: 0 10px 25px rgba(0,0,0,0.3);\n          animation: slideInRight 0.3s ease;\n        }\n        .notification.success { background: var(--success); }\n        .notification.error { background: var(--danger); }\n        .notification.info { background: var(--info); }\n        .notification-content { display: flex; align-items: center; gap: 10px; }\n        @keyframes slideInRight {\n          from { transform: translateX(100%); opacity: 0; }\n          to { transform: translateX(0); opacity: 1; }\n        }\n      ",document.head.appendChild(e)}document.body.appendChild(n),setTimeout(()=>{n.style.animation="slideInRight 0.3s ease reverse",setTimeout(()=>n.remove(),300)},3e3)}function hideLoadingOverlay(){const e=document.getElementById("pageLoadingOverlay")||document.getElementById("immediateLoadingOverlay");e&&(e.classList.add("hidden"),setTimeout(()=>{document.body.classList.add("loaded"),document.body.classList.remove("loading")},300))}window.viewEventDetails=function(e){window.open(`event.html?id=${e}`,"_blank")},window.editEvent=function(e){const n=t.find(t=>t.id.toString()===e.toString());n&&openEventModal(n)},window.confirmDeleteEvent=function(e){!function(e){const n=t.find(t=>t.id.toString()===e.toString());n&&(r.deleteEventName.textContent=n.name,r.deleteModal.style.display="flex",r.deleteModal.dataset.eventId=e,document.body.style.overflow="hidden")}(e)},window.removeTag=function(e){l=l.filter(t=>t!==e),updateTagsPreview()},async function(){try{document.querySelectorAll("[data-logout]").forEach(e=>{e.addEventListener("click",()=>{confirm("Sigur te deconectezi?")&&(window.location.href="business-auth.html")})}),document.getElementById("addEventBtn").addEventListener("click",()=>openEventModal()),document.getElementById("addFirstEventBtn").addEventListener("click",()=>openEventModal()),r.filterTabs.addEventListener("click",e=>{const t=e.target.closest(".filter-btn");t&&(o=t.dataset.filter,r.filterTabs.querySelectorAll(".filter-btn").forEach(e=>{e.classList.toggle("active",e.dataset.filter===o)}),applyFilters())}),r.searchInput.addEventListener("input",e=>{i=e.target.value.trim(),applyFilters()}),r.locationFilter.addEventListener("change",e=>{s=e.target.value,applyFilters()}),document.querySelectorAll("[data-close-modal]").forEach(e=>{e.addEventListener("click",closeEventModal)}),document.querySelectorAll("[data-close-delete]").forEach(e=>{e.addEventListener("click",closeDeleteModal)}),r.eventForm.addEventListener("submit",handleEventFormSubmit),r.hasPaidTickets.addEventListener("change",toggleTicketPricing),r.eventTags.addEventListener("input",handleTagsInput),r.eventTags.addEventListener("keydown",handleTagsKeydown),r.imageUploadArea.addEventListener("click",()=>r.eventImage.click()),r.eventImage.addEventListener("change",handleImageUpload),r.removeImage.addEventListener("click",hideImagePreview),document.getElementById("confirmDeleteBtn").addEventListener("click",handleDeleteEvent),document.getElementById("retryBtn").addEventListener("click",()=>{loadBusinessEvents()}),r.ownLocationRadio.addEventListener("change",handleLocationTypeChange),r.otherLocationRadio.addEventListener("change",handleLocationTypeChange),await async function(){try{const t=await fetch(`${e}/locations`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.ok){const e=await t.json();a=Array.isArray(e)?e:e.data||[],populateLocationFilter(),console.log("‚úÖ Successfully loaded user locations:",a.length)}else console.warn("Could not load user locations, using fallback mock data"),a=[{id:1,name:"Central Bistro",address:"Str. CentralƒÉ Nr. 15, Bucure»ôti"},{id:2,name:"Urban Roast",address:"Bd. Magheru Nr. 28, Bucure»ôti"},{id:3,name:"Garden Lounge",address:"Str. Florilor Nr. 42, Bucure»ôti"}],populateLocationFilter()}catch(e){console.error("Error loading user locations:",e),console.warn("Using fallback mock locations for demonstration"),a=[{id:1,name:"Central Bistro",address:"Str. CentralƒÉ Nr. 15, Bucure»ôti"},{id:2,name:"Urban Roast",address:"Bd. Magheru Nr. 28, Bucure»ôti"},{id:3,name:"Garden Lounge",address:"Str. Florilor Nr. 42, Bucure»ôti"}],populateLocationFilter()}}(),await loadBusinessEvents(),updateStatistics(),hideLoadingOverlay()}catch(e){console.error("Error initializing business events page:",e),t="Nu s-au putut √ÆncƒÉrca datele. √éncearcƒÉ din nou.",r.loadingState.style.display="none",r.errorState.style.display="flex",r.emptyState.style.display="none",r.eventsGrid.style.display="none",document.getElementById("errorMessage").textContent=t,hideLoadingOverlay()}var t}()});