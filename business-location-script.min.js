document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("locationContent"),t=new URLSearchParams(location.search).get("id");if(!t)return void(e.innerHTML='<p style="color:#ef4444;font-weight:600;">ID locație lipsă.</p>');const s={id:Number(t),name:"Central Bistro",address:"Str. Libertății 10, Cluj",tags:["Bistro","Terasa","WiFi"],hasMenu:!0,photo:"https://picsum.photos/seed/lprof"+t+"/1200/800",reservationsEnabled:!0},i=[{id:1,customerName:"Andrei Pop",status:"confirmed",reservationDate:"2025-09-05",timeSlot:"19:00",numberOfPeople:4},{id:2,customerName:"Maria Ionescu",status:"pending",reservationDate:"2025-09-06",timeSlot:"20:30",numberOfPeople:2},{id:3,customerName:"John Doe",status:"cancelled",reservationDate:"2025-09-06",timeSlot:"18:00",numberOfPeople:6}],n=Array.from({length:7}).map((e,t)=>({day:t,isOpen:1!==t,open:"09:00",close:"23:00"}));function formatTime24(e){const[t,s]=e.split(":"),i=parseInt(t,10);return`${i%12||12}:${s} ${i>=12?"PM":"AM"}`}!function(){e.innerHTML=`\n      <div class="hero-card">\n        <div class="hero-media"><img src="${s.photo}" alt="${s.name}" loading="lazy"/></div>\n        <h1 class="loc-title">${s.name}</h1>\n        <div class="address-line"><i class="fas fa-location-dot" style="color:#7c3aed;"></i><span>${s.address}</span></div>\n        <div class="tag-badges">${s.tags.map(e=>`<span class='tag'>${e}</span>`).join("")}</div>\n        <div class="today-hours"><i class="fas fa-clock"></i> ${function(){const e=(new Date).getDay(),t=n.find(t=>t.day===e);return t&&t.isOpen?`${formatTime24(t.open)} - ${formatTime24(t.close)}`:"Închis azi"}()}</div>\n      </div>\n      <div class="actions-row">\n        <button class="action-btn" id="hoursBtn"><i class="fas fa-clock"></i> Program</button>\n        <button class="action-btn green" id="reservationsBtn"><i class="fas fa-calendar"></i> Rezervări</button>\n      </div>\n      <div class="stats-grid">\n        <div class="stat-card"><div class="number">${i.length}</div><div style="color:#9ca3af;font-size:.65rem;letter-spacing:.5px;font-weight:600;">REZERVĂRI</div></div>\n        <div class="stat-card p2"><div class="number">${n.filter(e=>e.isOpen).length}</div><div style="color:#9ca3af;font-size:.65rem;letter-spacing:.5px;font-weight:600;">ZILE DESCHIS</div></div>\n      </div>\n      ${i.length?`<div class="reservations-list"><h3 class="section-title">Rezervări Recente</h3>${i.slice(0,3).map(e=>function(e){const t="confirmed"===e.status?"status-confirmed":"pending"===e.status?"status-pending":"status-cancelled";return`<div class="reservation-item"><div class="reservation-item-header"><div style='font-weight:600;'>${e.customerName}</div><span class="status-chip ${t}">${e.status.toUpperCase()}</span></div><div style='font-size:.65rem;color:#9ca3af;'>${new Date(e.reservationDate).toLocaleDateString("ro-RO")} la ${e.timeSlot}</div><div style='font-size:.65rem;color:#9ca3af;'>${e.numberOfPeople} persoane</div></div>`}(e)).join("")}<button class="action-btn" style="flex:1 1 100%;margin-top:4px;" id="allReservations"><i class='fas fa-list'></i> Toate Rezervările</button></div>`:""}\n      <div class="hours-table"><h3 class="section-title">Program Săptămânal</h3>${n.map(e=>function(e){const t=["Duminică","Luni","Marți","Miercuri","Joi","Vineri","Sâmbătă"],s=e.isOpen?`${formatTime24(e.open)} - ${formatTime24(e.close)}`:"Închis";return`<div class="hours-row"><div class="hours-day">${t[e.day]}</div><div class="hours-range ${e.isOpen?"hours-open":"hours-closed"}">${s}</div></div>`}(e)).join("")}</div>\n      <div class="danger-bar"><div><strong style="color:#ef4444;">Atenție!</strong><div style="font-size:.7rem;color:#b8b8b8;margin-top:4px;">Ștergerea locației este permanentă și nu poate fi anulată.</div></div><button id="deleteBtn"><i class="fas fa-trash"></i> Șterge Locația</button></div>\n    `,document.getElementById("hoursBtn").addEventListener("click",()=>window.location.href="business-location-hours.html?id="+t),document.getElementById("reservationsBtn").addEventListener("click",()=>window.location.href="business-reservations.html?id="+t);const a=document.getElementById("allReservations");a&&a.addEventListener("click",()=>alert("Listă completă rezervări (de implementat)"));document.getElementById("deleteBtn").addEventListener("click",()=>{confirm("Sigur ștergi această locație?")&&(alert("Șters (demo)"),window.location.href="business-locations.html")})}()});