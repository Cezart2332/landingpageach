document.addEventListener("DOMContentLoaded",()=>{const e=(()=>{try{const e=localStorage.getItem("ac_debug");return null===e||("1"===e||"true"===e||"on"===e)}catch{return!0}})(),dbg=(...t)=>{e&&console.debug("[BusinessPage]",...t)};document.querySelectorAll(".faq-item").forEach(e=>{e.addEventListener("click",()=>{e.classList.toggle("open")})}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",t=>{const o=e.getAttribute("href");if(o&&o.startsWith("#")&&o.length>1){const e=document.querySelector(o);e&&(t.preventDefault(),window.scrollTo({top:e.offsetTop-80,behavior:"smooth"}))}})});const t=Array.from(document.querySelectorAll(".feature-card, .step, .plan, .faq-item, .stat-card"));function showEl(e){e.classList.add("reveal-visible");const t=e.dataset.revealDelay||"0";e.style.transitionDelay=`${Math.min(Number(t),600)}ms`,e.classList.remove("reveal-init")}if(t.forEach((e,t)=>{e.classList.add("reveal-init"),e.dataset.revealDelay=(60*t).toString()}),"IntersectionObserver"in window){const e=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(showEl(t.target),e.unobserve(t.target))})},{threshold:.15,rootMargin:"0px 0px -50px 0px"});t.forEach(t=>e.observe(t));const o=window.innerHeight;t.forEach(t=>{t.getBoundingClientRect().top<.92*o&&(showEl(t),e.unobserve(t))})}else t.forEach(showEl);setTimeout(()=>{t.forEach(e=>{e.classList.contains("reveal-visible")||showEl(e)})},3e3);try{const e=document.querySelector('.biz-menu a[href="business-auth.html"], .biz-menu a.biz-cta-btn');e&&e.addEventListener("click",async e=>{try{if(!window.SecureApiService)return;const t={},o={};try{for(let e=0;e<sessionStorage.length;e++){const o=sessionStorage.key(e);o&&(t[o]=sessionStorage.getItem(o))}}catch{}try{for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e);t&&(o[t]=localStorage.getItem(t))}}catch{}dbg("join:storageSnapshot",{sessionStorage:t,localStorage:o});const r=await window.SecureApiService.isAuthenticated();dbg("join:isAuthenticated",r),r&&(e.preventDefault(),window.location.href="business-dashboard.html")}catch(e){dbg("join:error",e)}},{capture:!0})}catch(e){dbg("join:initError",e)}});