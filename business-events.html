<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>AcoomH Evenimente Business</title>
  <meta name="description" content="Gestionează evenimentele pentru locațiile tale în platforma AcoomH." />
  <link rel="icon" type="image/png" href="acoomh.png" />
  <link rel="stylesheet" href="style.min.css?v=INITIAL" />
  <link rel="stylesheet" href="business-events-style.min.css?v=1757848038362" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
</head>
<body>
  <!-- Loading Overlay -->
  <div class="page-loading-overlay" id="immediateLoadingOverlay">
    <div class="loading-spinner-container">
      <div class="modern-loading-spinner"></div>
      <div class="loading-text">
        Se încarcă<span class="loading-dots"></span>
      </div>
    </div>
  </div>

  <nav class="events-nav">
    <div class="inner">
      <a href="business-dashboard.html" class="events-brand"><img src="acoomh.png" alt="AcoomH"/>AcoomH</a>
      <div class="events-actions">
        <button class="btn-small" onclick="location.href='business-dashboard.html'"><i class="fas fa-arrow-left"></i> Dashboard</button>
        <button class="btn-small" onclick="location.href='business.html'"><i class="fas fa-home"></i> Site</button>
        <button class="btn-small btn-danger" data-logout><i class="fas fa-right-from-bracket"></i> Logout</button>
      </div>
    </div>
  </nav>

  <main class="events-container" id="eventsRoot">
    <!-- Header Section -->
    <div class="events-header">
      <div class="header-content">
        <h1 class="page-title">Evenimentele Tale</h1>
        <p class="subtitle">Creează, editează și promovează evenimente pentru locațiile tale</p>
      </div>
      <button class="primary-btn" id="addEventBtn">
        <i class="fas fa-plus"></i> Adaugă Eveniment
      </button>
    </div>

    <!-- Stats Row -->
    <div class="stats-row" id="statsRow">
      <div class="stat-box">
        <div class="stat-label">TOTAL EVENIMENTE</div>
        <div class="stat-value" id="totalEvents">-</div>
      </div>
      <div class="stat-box amber">
        <div class="stat-label">ACTIVE</div>
        <div class="stat-value" id="activeEvents">-</div>
      </div>
      <div class="stat-box green">
        <div class="stat-label">VIITOARE</div>
        <div class="stat-value" id="upcomingEvents">-</div>
      </div>
      <div class="stat-box blue">
        <div class="stat-label">BILETE VÂNDUTE</div>
        <div class="stat-value" id="ticketsSold">-</div>
      </div>
    </div>

    <!-- Filters -->
    <div class="filters-section">
      <div class="filter-tabs" id="filterTabs">
        <button class="filter-btn active" data-filter="all">Toate</button>
        <button class="filter-btn" data-filter="upcoming">Viitoare</button>
        <button class="filter-btn" data-filter="active">Active</button>
        <button class="filter-btn" data-filter="past">Trecute</button>
        <button class="filter-btn" data-filter="draft">Draft</button>
      </div>
      <div class="search-row">
        <div class="search-input-wrapper">
          <i class="fas fa-search"></i>
          <input type="text" id="searchInput" placeholder="Caută evenimente..." />
        </div>
        <select id="locationFilter" class="filter-select">
          <option value="all">Toate locațiile</option>
        </select>
      </div>
    </div>

    <!-- Events Content -->
    <div id="eventsContent">
      <!-- Loading State -->
      <div class="loading-state" id="loadingState">
        <div class="loading-content">
          <div class="loading-spinner"></div>
          <p>Se încarcă evenimentele...</p>
        </div>
      </div>

      <!-- Error State -->
      <div class="error-state" id="errorState" style="display: none;">
        <div class="error-content">
          <i class="fas fa-exclamation-triangle"></i>
          <h3>Nu s-au putut încărca evenimentele</h3>
          <p id="errorMessage">A apărut o eroare neașteptată.</p>
          <button class="retry-btn" id="retryBtn">
            <i class="fas fa-refresh"></i> Încearcă din nou
          </button>
        </div>
      </div>

      <!-- Empty State -->
      <div class="empty-state" id="emptyState" style="display: none;">
        <div class="empty-content">
          <div class="empty-icon">
            <i class="fas fa-calendar-plus"></i>
          </div>
          <h3>Nu există evenimente încă</h3>
          <p>Creează primul tău eveniment pentru a atrage mai mulți clienți</p>
          <button class="primary-btn" id="addFirstEventBtn">
            <i class="fas fa-plus"></i> Creează primul eveniment
          </button>
        </div>
      </div>

      <!-- Events List -->
      <div class="events-grid" id="eventsGrid">
        <!-- Events will be dynamically inserted here -->
      </div>
    </div>
  </main>

  <!-- Add/Edit Event Modal -->
  <div class="event-modal" id="eventModal" style="display: none;">
    <div class="modal-backdrop" data-close-modal></div>
    <div class="modal-dialog">
      <div class="modal-header">
        <h3 id="modalTitle">Adaugă Eveniment</h3>
        <button class="modal-close" data-close-modal>
          <i class="fas fa-times"></i>
        </button>
      </div>
      <form id="eventForm" class="modal-body">
        <!-- Basic Info -->
        <div class="form-section">
          <h4><i class="fas fa-info-circle"></i> Informații de bază</h4>
          <div class="field-group">
            <label for="eventName">Titlu eveniment <span class="required">*</span></label>
            <input type="text" id="eventName" class="form-input" placeholder="Ex: Concert live jazz" required />
            <div class="field-error" id="eventNameError"></div>
          </div>
          <div class="field-group">
            <label for="eventDescription">Descriere <span class="required">*</span></label>
            <textarea id="eventDescription" class="form-textarea" placeholder="Descrie evenimentul..." rows="4" required></textarea>
            <div class="field-error" id="eventDescriptionError"></div>
          </div>
        </div>

        <!-- Date & Time -->
        <div class="form-section">
          <h4><i class="fas fa-clock"></i> Programare</h4>
          <div class="field-row">
            <div class="field-group">
              <label for="eventDate">Data evenimentului <span class="required">*</span></label>
              <input type="date" id="eventDate" class="form-input" required />
              <div class="field-error" id="eventDateError"></div>
            </div>
            <div class="field-group">
              <label for="eventTime">Ora de început <span class="required">*</span></label>
              <input type="time" id="eventTime" class="form-input" required />
              <div class="field-error" id="eventTimeError"></div>
            </div>
          </div>
          <div class="field-row">
            <div class="field-group">
              <label for="eventEndTime">Ora de sfârșit <span class="required">*</span></label>
              <input type="time" id="eventEndTime" class="form-input" required />
              <div class="field-error" id="eventEndTimeError"></div>
            </div>
            <div class="field-group">
              <label>&nbsp;</label>
              <div class="checkbox-row" style="margin-top: 8px;">
                <input type="checkbox" id="isActive" />
                <label for="isActive">Activ</label>
              </div>
            </div>
          </div>
        </div>

        <!-- Location Info -->
        <div class="form-section">
          <h4><i class="fas fa-map-marker-alt"></i> Locație</h4>
          <div class="field-group">
            <label for="eventAddress">Adresă <span class="required">*</span></label>
            <input type="text" id="eventAddress" class="form-input" placeholder="Strada și numărul" required />
            <div class="field-error" id="eventAddressError"></div>
          </div>
          <div class="field-group">
            <label for="eventCity">Oraș</label>
            <input type="text" id="eventCity" class="form-input" placeholder="Ex: Constanța" />
          </div>
        </div>

        <!-- Image -->
        <div class="form-section">
          <h4><i class="fas fa-image"></i> Imagine</h4>
          <div class="field-group">
            <label for="eventImage">Imagine eveniment</label>
            <div class="file-upload-area" id="imageUploadArea">
              <i class="fas fa-camera"></i>
              <p>Click pentru a adăuga imagine</p>
              <input type="file" id="eventImage" accept="image/*" style="display: none;" />
            </div>
            <div class="image-preview" id="imagePreview" style="display: none;">
              <img id="previewImg" src="" alt="Preview" />
              <button type="button" class="remove-image" id="removeImage">
                <i class="fas fa-times"></i>
              </button>
            </div>
          </div>
        </div>

        <div class="modal-actions">
          <button type="button" class="btn-secondary" data-close-modal>Anulează</button>
          <button type="submit" class="btn-primary" id="saveEventBtn">
            <i class="fas fa-save"></i> Salvează Eveniment
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Delete Confirmation Modal -->
  <div class="confirm-modal" id="deleteModal" style="display: none;">
    <div class="modal-backdrop" data-close-delete></div>
    <div class="confirm-dialog">
      <div class="confirm-header">
        <i class="fas fa-exclamation-triangle"></i>
        <h3>Șterge Eveniment</h3>
      </div>
      <div class="confirm-body">
        <p>Ești sigur că vrei să ștergi evenimentul <strong id="deleteEventName"></strong>?</p>
        <p class="warning-text">Această acțiune nu poate fi anulată și toate rezervările asociate vor fi anulate.</p>
      </div>
      <div class="confirm-actions">
        <button class="btn-secondary" data-close-delete>Anulează</button>
        <button class="btn-danger" id="confirmDeleteBtn">
          <i class="fas fa-trash"></i> Șterge Definitiv
        </button>
      </div>
    </div>
  </div>

  <script src="secure-api.min.js?v=1757848038362"></script>
  <script>
    try {
      if (!window.SecureApiService || !window.SecureApiService.isAuthenticated()) {
        window.location.href = 'business-auth.html';
      }
    } catch (e) { window.location.href = 'business-auth.html'; }
  </script>
  <script src="business-events-script.min.js?v=1757848038362"></script>
</body>
</html>